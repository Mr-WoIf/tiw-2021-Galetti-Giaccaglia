
CREATE TABLE student(
    id SERIAL,
    mail varchar(254) NOT NULL,
    password varchar(45) NOT NULL,
    name varchar(45) NOT NULL,
    surname varchar(45) NOT NULL,
    school varchar(45) NOT NULL,
    PRIMARY KEY(id)
)

CREATE TABLE study_plan (

    student_id SERIAL,
    course_id int(6),
    school varchar(45) NOT NULL,

    PRIMARY KEY(student_id, course_id),

    FOREIGN KEY (student_id) REFERENCES student(id) ON
    DELETE CASCADE ON UPDATE CASCADE,

    FOREIGN KEY(course_id) REFERENCES course(id) ON
    UPDATE CASCADE ON DELETE NO ACTION
);

CREATE TABLE exam (
     id SERIAL,
     course_id SERIAL,
     data date NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY (course_id) REFERENCES course(id) ON
    UPDATE CASCADE ON DELETE NO ACTION
)

CREATE TABLE professor (

    id SERIAL ,
    mail varchar(254),
    password varchar(45) NOT NULL,
    name varchar(255) NOT NULL,
    surname varchar(255) NOT NULL,
    department varchar(45) NOT NULL,

    PRIMARY KEY(id)
)

CREATE TABLE course (

    id SERIAL ,
    professor_id SERIAL,
    name varchar(45) NOT NULL,

    PRIMARY KEY(id),

    FOREIGN KEY(professor_id) REFERENCES professor(id) ON
    UPDATE CASCADE ON DELETE NO ACTION
)

CREATE TABLE exam_register (

    student_id SERIAL,
    exam_id SERIAL,
    grade int,
    id_report SERIAL,

    PRIMARY KEY(student_id, exam_id),

    FOREIGN KEY(student_id) REFERENCES student(id) ON
    UPDATE CASCADE ON DELETE NO ACTION,

    FOREIGN KEY(exam_id) REFERENCES exam(id) ON
    UPDATE CASCADE ON DELETE NO ACTION,

    FOREIGN KEY(id_report) REFERENCES report(id) ON
    UPDATE CASCADE ON DELETE NO ACTION
)

CREATE TABLE report (

    id SERIAL,
		exam_id SERIAL,
    datetime timestamp NOT NULL,

    PRIMARY KEY(id, exam_id)

		FOREIGN_KEY(exam_id) REFERENCES exam(id) ON 
		UPDATE CASCADE ON DELETE NO ACTION

)